import{$ as E,Y as e,be as u,bL as S,bM as D,bN as H,at as b,as as t,a0 as O,b2 as r,bO as k,a1 as v,by as o,_ as M}from"./main-b-impCUS.js";import{A as V,C as B,S as y}from"./AlertBanner--yDZYgEP.js";import{H as C}from"./HGrid-k-G7xWjv.js";import{P as N}from"./Pagination-B6GxiZe2.js";function P(s){return s?s.enhet?`${s.enhet.enhetId} ${s.enhet.navn}`:"Ikke angitt":"-"}function I(s){return s?`${s.navn} (${s.ident})`:"-"}function R(s){return s?"Ja":s===!1?"Nei":"Meldeplikt Ukjent"}const _=()=>{const{data:s,isLoading:i,isError:c}=D();if(!c)return i?e.jsx(y,{variant:"rectangle",height:166}):s?e.jsxs(e.Fragment,{children:[e.jsx(b,{as:"h4",size:"small",children:"Arbeidsoppfølging"}),e.jsxs(C,{gap:"4",columns:{sm:1,md:2,lg:4},className:"mt-2",children:[e.jsxs(t,{justify:"space-between",children:[e.jsx(r,{size:"small",weight:"semibold",children:"Status:"}),e.jsx(r,{size:"small",children:s.oppfolging?.erUnderOppfolging?"Under oppfølging":"Ikke under oppfølging"})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(r,{size:"small",weight:"semibold",children:"Oppfølgingsenhet:"}),e.jsx(r,{size:"small",children:P(s.oppfolging)})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(r,{size:"small",weight:"semibold",children:"Rettighetsgruppe:"}),e.jsx(r,{size:"small",children:s.rettighetsgruppe})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(r,{size:"small",weight:"semibold",children:"Veileder:"}),e.jsx(r,{size:"small",children:I(s.oppfolging?.veileder)})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(r,{size:"small",weight:"semibold",children:"Meldeplikt:"}),e.jsx(r,{size:"small",children:R(s.meldeplikt)})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(r,{size:"small",weight:"semibold",children:"Formidlingsgruppe:"}),e.jsx(r,{size:"small",children:s.formidlingsgruppe})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(r,{size:"small",weight:"semibold",children:"Oppfølgingsvedtak:"}),e.jsx(r,{size:"small",children:k(s.vedtaksdato)})]})]})]}):e.jsx(O,{variant:"info",children:"Brukeren har ingen oppfølging."})},$=()=>{const{data:s,isLoading:i,isError:c}=S(),a=s?.gjeldende14aVedtak;if(!c)return i?e.jsx(y,{variant:"rectangle",height:166}):e.jsxs(e.Fragment,{children:[e.jsx(b,{as:"h4",size:"small",children:"14 a-vedtak"}),e.jsxs(C,{gap:"4",columns:{sm:1,md:2},className:"mt-4",children:[e.jsxs(t,{justify:"space-between",children:[e.jsx(r,{size:"small",weight:"semibold",children:"Status:"}),e.jsx(r,{size:"small",children:a?"Har 14a vedtak":"Har ikke 14a vedtak"})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(r,{size:"small",weight:"semibold",children:"Innsatsgruppe:"}),e.jsx(r,{size:"small",children:a?.innsatsgruppe.beskrivelse})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(r,{size:"small",weight:"semibold",children:"Hovedmål:"}),e.jsx(r,{size:"small",children:a?.hovedmal?.beskrivelse})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(r,{size:"small",weight:"semibold",children:"Vedtaksdato:"}),e.jsx(r,{size:"small",children:k(a?.fattetDato)})]})]})]})},A=()=>{const{data:s,isError:i,isLoading:c}=H(),a=s?.sykefravaersoppfolging,[p,x]=v.useState({orderBy:"dato",direction:"descending"}),[g,f]=v.useState(1);if(i)return;if(c)return e.jsx(y,{variant:"rectangle",height:166});if(!a||a.length===0)return e.jsx(O,{variant:"info",children:"Brukeren har ingen sykefraværs-oppfølging."});const j=n=>{x(h=>h?.orderBy===n&&h.direction==="ascending"?{orderBy:n,direction:"descending"}:{orderBy:n,direction:"ascending"})},d=[...a].sort((n,h)=>{if(!p)return 0;const z=n.dato?new Date(n.dato).getTime():0,w=h.dato?new Date(h.dato).getTime():0;return p.direction==="ascending"?z-w:w-z}),l=10,m=d.slice((g-1)*l,g*l);return e.jsx(B,{padding:"4",children:e.jsxs(t,{gap:"space-16",children:[e.jsx(b,{as:"h4",size:"small",children:"Sykefraværsoppfølging"}),e.jsxs(o,{zebraStripes:!0,sort:p,onSortChange:j,size:"small",children:[e.jsx(o.Header,{children:e.jsxs(o.Row,{children:[e.jsx(o.ColumnHeader,{sortKey:"dato",sortable:!0,children:"Innen"}),e.jsx(o.HeaderCell,{scope:"col",children:"Hendelse"}),e.jsx(o.HeaderCell,{scope:"col",children:"Status"})]})}),e.jsx(o.Body,{children:m.map((n,h)=>e.jsxs(o.Row,{shadeOnHover:!0,children:[e.jsx(o.DataCell,{children:k(n.dato)??"Ikke angitt"}),e.jsx(o.DataCell,{children:n.syfoHendelse??"Ikke angitt"}),e.jsx(o.DataCell,{children:n.status??"Ikke angitt"})]},h))})]}),d.length>l&&e.jsx(N,{page:g,onPageChange:f,count:Math.ceil(d.length/l),size:"xsmall"})]})})},L=()=>{const s=E.c(12),{errorMessages:i,isError:c}=S(),{errorMessages:a,isError:p}=D(),{errorMessages:x}=H(),g=p&&c,f=p||c;let j;s[0]===Symbol.for("react.memo_cache_sentinel")?(j=e.jsx(b,{visuallyHidden:!0,size:"small",children:"Oppfølging"}),s[0]=j):j=s[0];let d;s[1]!==a||s[2]!==i||s[3]!==x?(d=e.jsx(V,{alerts:[...a,...i,...x]}),s[1]=a,s[2]=i,s[3]=x,s[4]=d):d=s[4];let l;s[5]!==g||s[6]!==f?(l=!g&&e.jsxs(B,{padding:"4",children:[e.jsx(u,{boundaryName:"oppfolgingDetaljer",children:e.jsx(_,{})}),!f&&e.jsx("div",{className:"my-4 border border-ax-border-neutral-subtle"}),e.jsx(u,{boundaryName:"gjeldende14aVedtakDetaljer",children:e.jsx($,{})})]}),s[5]=g,s[6]=f,s[7]=l):l=s[7];let m;s[8]===Symbol.for("react.memo_cache_sentinel")?(m=e.jsx(u,{boundaryName:"sykefraversoppfolgingDetaljer",children:e.jsx(A,{})}),s[8]=m):m=s[8];let n;return s[9]!==d||s[10]!==l?(n=e.jsxs(t,{gap:"1",minHeight:"0",overflow:"auto",children:[j,d,l,m]}),s[9]=d,s[10]=l,s[11]=n):n=s[11],n},F=()=>{const s=E.c(1);let i;return s[0]===Symbol.for("react.memo_cache_sentinel")?(i=e.jsx(u,{boundaryName:"OppfolgingPage",errorText:"Det oppstod en feil under lasting av Oppfolging.",children:e.jsx(L,{})}),s[0]=i):i=s[0],i},Y=M("/new/person/oppfolging")({component:F});export{Y as Route};
//# sourceMappingURL=oppfolging.lazy-D6Hu8C_l.js.map
