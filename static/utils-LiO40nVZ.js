import{bo as R,aM as b,m as k,N as j,Q as h,a4 as C,C as l,a3 as g,ap as _,aS as S,aw as F,bD as y,b1 as D,bq as N,f as w}from"./main-CzQLl0ZF.js";import{g as E,P as O,E as x,D as $}from"./DatePeriodSelector-Cv1FCW6p.js";import{C as A}from"./ComboboxProvider-MPM6LIlr.js";const T=E(O.CUSTOM),m=R({dateRange:T,tema:[]}),M=b(e=>e(m).tema,(e,a,o)=>{a(m,t=>({...t,tema:t.tema?k.xor(t.tema,[o]):[o]}))}),P=b(e=>e(m).dateRange,(e,a,o)=>{const t=o??T;a(m,s=>({...s,dateRange:t}))}),I=()=>{const e=j.c(3),[a,o]=F(P);let t;return e[0]!==o||e[1]!==a?(t=l.jsx($,{resettable:!1,range:a,onChange:o,defaultPeriodType:O.CUSTOM}),e[0]=o,e[1]=a,e[2]=t):t=e[2],t},z=()=>{const[e,a]=F(M),{data:o}=y(),t=h.useCallback(s=>{a(s)},[e]);return l.jsx(A,{size:"small",label:"Tema",options:o.map(s=>({label:`${s.tekst} [${s.kode}]`,value:s.kode})),isMultiSelect:!0,selectedOptions:e,onToggleSelected:t})},L=()=>{const e=j.c(2),a=S(m);let o,t=0;a.tema&&a.tema.length>0&&t++,a.dateRange&&t++,o=t?`(${t})`:null;const s=o;let n;return e[0]!==s?(n=l.jsxs(l.Fragment,{children:["Filter ",s]}),e[0]=s,e[1]=n):n=e[1],n},W=()=>{const e=j.c(13),[a,o]=h.useState(!1),t=h.useRef(null);let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{setTimeout(()=>{t.current&&o(t.current.classList.contains("aksel-expansioncard--open"))},0)},e[0]=s):s=e[0];const n=s;let r;e[1]!==a?(r=a?"100%":{},e[1]=a,e[2]=r):r=e[2];const v=a&&"max-h-full overflow-auto";let i;e[3]!==v?(i=C(v),e[3]=v,e[4]=i):i=e[4];let d;e[5]===Symbol.for("react.memo_cache_sentinel")?(d=l.jsx(x.Header,{className:"p-1",children:l.jsx(g.New,{paddingInline:"4",children:l.jsx(x.Title,{size:"small",children:l.jsx(L,{})})})}),e[5]=d):d=e[5];let p;e[6]===Symbol.for("react.memo_cache_sentinel")?(p=l.jsx(g.New,{maxWidth:"17rem",children:l.jsx(z,{})}),e[6]=p):p=e[6];let f;e[7]===Symbol.for("react.memo_cache_sentinel")?(f=l.jsx(x.Content,{className:"overflow-visible",children:l.jsxs(_,{gap:"2",children:[p,l.jsx(g.New,{children:l.jsx(I,{})})]})}),e[7]=f):f=e[7];let c;e[8]!==i?(c=l.jsxs(x,{size:"small","aria-label":"Filtrer oppgaver",ref:t,onClick:n,className:i,children:[d,f]}),e[8]=i,e[9]=c):c=e[9];let u;return e[10]!==r||e[11]!==c?(u=l.jsx(g.New,{marginInline:"0 2",maxHeight:r,children:c}),e[10]=r,e[11]=c,e[12]=u):u=e[12],u},B=(e,a)=>{const{tema:o,dateRange:t}=a;if(!e||e.length===0)return[];let s=e;return o?.length&&(s=s.filter(n=>o.includes(n.tema))),t?.from&&t?.to&&(s=s.filter(n=>{const r=w(n.aktivDato);return r.isSameOrAfter(t.from)&&r.isSameOrBefore(t.to)})),s??[]},q=()=>{const e=S(m),{data:a}=D(),o=a.sort(N(t=>t.aktivDato));return h.useMemo(()=>B(o,e),[o,e])},G=e=>`Oppgave${e.oppgaveId}`;export{W as O,G as g,m as o,q as u};
//# sourceMappingURL=utils-LiO40nVZ.js.map
