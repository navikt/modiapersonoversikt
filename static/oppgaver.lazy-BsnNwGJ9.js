import{bq as G,$ as _,Y as t,be as K,aK as Y,a1 as R,cJ as Q,aq as T,a0 as J,cK as U,ap as X,cl as Z,aF as ee,ab as te,bw as N,as as O,ae,bU as se,bV as re,at as ne,_ as ie}from"./main-b-impCUS.js";import{S as q,C as le,A as oe}from"./AlertBanner--yDZYgEP.js";import{a as z,o as pe,g as H,O as ce}from"./utils-B5auTVmM.js";import{O as ge}from"./OppgaveContent-DmPusaum.js";import{P as me}from"./index-CNK7K_4P.js";import{H as de}from"./HGrid-k-G7xWjv.js";import"./useDescendant-BnjTiyjz.js";import"./modiapersonoversikt-api-BJowq4Ah.js";import"./ExternalLink-BmQv-k6I.js";import"./Pagination-B6GxiZe2.js";const V=G("/new/person/oppgaver"),fe=a=>{const e=_.c(7),{oppgaver:s}=a,{id:i}=V.useSearch();let l;e[0]!==i?(l=n=>H(n)===i,e[0]=i,e[1]=l):l=e[1];let r;r=s.find(l);const p=Y(pe),o=R.useRef(p),g=V.useNavigate();if(R.useEffect(()=>{const n=JSON.stringify(o.current)!==JSON.stringify(p),S=!r||!s.includes(r);(n&&S||S)&&Q().clear()},[r,s,p]),!s.length){let n;return e[2]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsx(t.Fragment,{}),e[2]=n):n=e[2],n}if(!r&&i){let n;return e[3]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsx(T,{flexGrow:"1",minHeight:"0",className:"",children:t.jsx(J,{variant:"error",children:"Oppgaven du valgte, ble ikke funnet."})}),e[3]=n):n=e[3],n}if(!r&&!i&&(r=s[0],g({search:{id:H(r)}})),!r){let n;return e[4]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsx(t.Fragment,{}),e[4]=n):n=e[4],n}let m;return e[5]!==r?(m=t.jsx(ge,{oppgave:r}),e[5]=r,e[6]=m):m=e[6],m},ve=()=>{const a=_.c(3),{data:e,isLoading:s}=z();let i;return a[0]!==s||a[1]!==e?(i=t.jsx(K,{boundaryName:"oppgaveDetaljer",errorText:"Det oppstod en feil under visning av oppgave detailjer",children:s?t.jsx(q,{variant:"rectangle",height:"4rem"}):t.jsx(fe,{oppgaver:e})}),a[0]=s,a[1]=e,a[2]=i):i=a[2],i},B=G("/new/person/oppgaver"),he=a=>{const e=_.c(47),{oppgave:s}=a,{data:i}=U();let l,r;if(e[0]!==i||e[1]!==s.oppgavetype||e[2]!==s.tema){let c;e[5]!==s.tema?(c=P=>P.kode===s.tema,e[5]=s.tema,e[6]=c):c=e[6],r=i.find(c);const W=r?.oppgavetyper??[];let A;e[7]!==s.oppgavetype?(A=P=>P.kode===s.oppgavetype,e[7]=s.oppgavetype,e[8]=A):A=e[8],l=W.find(A),e[0]=i,e[1]=s.oppgavetype,e[2]=s.tema,e[3]=l,e[4]=r}else l=e[3],r=e[4];const p=l,o=B.useSearch().id,g=B.useNavigate();let m;e[9]!==s?(m=H(s),e[9]=s,e[10]=m):m=e[10];const n=m,S=R.useRef(null);let E;e[11]!==o||e[12]!==n?(E=()=>{o===n&&S.current?.focus()},e[11]=o,e[12]=n,e[13]=E):E=e[13];let F;e[14]!==o||e[15]!==s.oppgaveId?(F=[o,s.oppgaveId],e[14]=o,e[15]=s.oppgaveId,e[16]=F):F=e[16],R.useEffect(E,F);let w;e[17]!==n||e[18]!==g?(w=()=>{g({search:{id:n},state:{umamiEvent:{name:ee.detaljvisningKlikket,data:{fane:"oppgaver",tekst:"vis oppgave"}}}})},e[17]=n,e[18]=g,e[19]=w):w=e[19];const d=w;let f;e[20]!==d?(f=c=>{c.preventDefault(),d()},e[20]=d,e[21]=f):f=e[21];let v;e[22]!==d?(v=c=>{c.key!=="Enter"&&c.key!==" "&&c.key!=="Spacebar"||(c.preventDefault(),d())},e[22]=d,e[23]=v):v=e[23];const $=o===n&&"bg-ax-bg-accent-moderate-pressed border-ax-bg-accent-moderate-pressed";let h;e[24]!==$?(h=X("cursor-pointer hover:bg-[var(--ax-bg-accent-moderate-hover)] group",$),e[24]=$,e[25]=h):h=e[25];const C=r?.tekst??"Ukjent tema";let u;e[26]!==C?(u=t.jsx(te,{size:"small",as:"h3",children:C}),e[26]=C,e[27]=u):u=e[27];let L;e[28]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsx(N,{children:"Oppgavetype:"}),e[28]=L):L=e[28];const M=p?.tekst??"Ukjent oppgavetype";let x;e[29]!==M?(x=t.jsxs(T,{gap:"1",children:[L,t.jsx(N,{children:M})]}),e[29]=M,e[30]=x):x=e[30];let D;e[31]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx(N,{children:"Forfallsdato:"}),e[31]=D):D=e[31];let j;e[32]!==s.fristFerdigstillelse?(j=s.fristFerdigstillelse?Z(s.fristFerdigstillelse):"",e[32]=s.fristFerdigstillelse,e[33]=j):j=e[33];let y;e[34]!==j?(y=t.jsxs(T,{gap:"1",children:[D,t.jsx(N,{children:j})]}),e[34]=j,e[35]=y):y=e[35];let k;e[36]!==u||e[37]!==x||e[38]!==y?(k=t.jsxs(O,{justify:"center",children:[u,x,y]}),e[36]=u,e[37]=x,e[38]=y,e[39]=k):k=e[39];let b;e[40]!==k||e[41]!==h?(b=t.jsx(le,{padding:"2",className:h,as:"li",children:k}),e[40]=k,e[41]=h,e[42]=b):b=e[42];let I;return e[43]!==b||e[44]!==f||e[45]!==v?(I=t.jsx(ae,{ref:S,variant:"neutral",className:"hover:no-underline block",underline:!1,onClick:f,tabIndex:0,role:"link",onKeyDown:v,children:b}),e[43]=b,e[44]=f,e[45]=v,e[46]=I):I=e[46],I},ue=()=>t.jsx(K,{boundaryName:"OppgaverList",errorText:"Det oppstod en feil under visning av oppgave liste",children:t.jsxs(O,{height:"100%",gap:"1",children:[t.jsx(ce,{}),t.jsx(xe,{})]})}),xe=()=>{const{data:a,isLoading:e,isError:s}=z(),i=se(),l=re({from:"/new/person/oppgaver",select:r=>r.id});if(!s)return!e&&!a.length?t.jsx(J,{variant:"info",role:"alert",children:"Ingen oppgaver funnet"}):t.jsx(t.Fragment,{children:e?t.jsx(O,{gap:"2",marginInline:"0 2",children:Array(8).keys().map(r=>t.jsx(q,{variant:"rectangle",height:68},r))}):t.jsx(me,{paginationSrHeading:{tag:"h3",text:"Oppgavepaginering"},"aria-label":"oppgaver",as:"section",pageSize:i,selectedKey:l,items:a,keyExtractor:H,renderItem:({item:r})=>t.jsx(he,{oppgave:r})})})},je=()=>{const a=_.c(1);let e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=t.jsx(K,{boundaryName:"OppgaverPage",errorText:"Det oppstod en feil under lasting av oppgaver.",children:t.jsx(ye,{})}),a[0]=e):e=a[0],e},ye=()=>{const a=_.c(9),{errorMessages:e}=z(),{errorMessages:s}=U();let i;a[0]===Symbol.for("react.memo_cache_sentinel")?(i={xs:1,md:"max-content 1fr"},a[0]=i):i=a[0];let l;a[1]===Symbol.for("react.memo_cache_sentinel")?(l={xs:"auto",md:"hidden"},a[1]=l):l=a[1];let r;a[2]===Symbol.for("react.memo_cache_sentinel")?(r=t.jsxs(O,{height:"100%",gap:"1",width:"100%",maxWidth:{md:"16em"},overflow:{md:"hidden"},children:[t.jsx(ne,{size:"small",visuallyHidden:!0,level:"2",children:"Oppgaver"}),t.jsx(ue,{})]}),a[2]=r):r=a[2];let p;a[3]!==e||a[4]!==s?(p=t.jsx(oe,{alerts:[...e,...s]}),a[3]=e,a[4]=s,a[5]=p):p=a[5];let o;a[6]===Symbol.for("react.memo_cache_sentinel")?(o=t.jsx(O,{minHeight:"0",children:t.jsx(ve,{})}),a[6]=o):o=a[6];let g;return a[7]!==p?(g=t.jsxs(de,{gap:"1",columns:i,height:"100%",width:"100%",overflow:l,children:[r,t.jsxs(O,{className:"min-h-100 md:min-h-0",children:[p,o]})]}),a[7]=p,a[8]=g):g=a[8],g},Ie=ie("/new/person/oppgaver")({component:je});export{Ie as Route};
//# sourceMappingURL=oppgaver.lazy-BsnNwGJ9.js.map
