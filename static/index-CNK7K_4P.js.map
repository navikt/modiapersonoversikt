{"version":3,"file":"index-CNK7K_4P.js","sources":["../../src/components/PaginatedList/index.tsx"],"sourcesContent":["import { Pagination, VStack } from '@navikt/ds-react';\nimport { chunk } from 'lodash';\nimport { type ComponentProps, type ComponentPropsWithRef, type JSX, useEffect, useMemo, useState } from 'react';\n\ntype Props<T, KeyType> = Omit<ComponentPropsWithRef<typeof VStack>, 'as'> & {\n    items: T[];\n    pageSize?: number;\n    renderItem: ({ item }: { item: T }) => JSX.Element;\n    keyExtractor: (item: T) => KeyType;\n    selectedKey?: KeyType;\n    as?: ComponentPropsWithRef<typeof VStack>['as'];\n    paginationSrHeading?: ComponentProps<typeof Pagination>['srHeading'];\n};\n\nexport const PaginatedList = <T, KeyType extends string | number>({\n    items,\n    pageSize = 10,\n    renderItem: RenderComp,\n    keyExtractor,\n    selectedKey,\n    as,\n    paginationSrHeading,\n    ...rest\n}: Props<T, KeyType>) => {\n    const [page, setPage] = useState(0);\n    const pages = useMemo(() => chunk(items, pageSize), [items, pageSize]);\n    const pageCount = useMemo(() => pages.length, [pages]);\n    const renderItems = useMemo(() => pages[page > pageCount - 1 ? pageCount - 1 : page], [pages, page, pageCount]);\n\n    useEffect(() => {\n        if (selectedKey) {\n            const pageWithItem = pages.findIndex((p) => p.map(keyExtractor).includes(selectedKey));\n            if (pageWithItem >= 0) {\n                setPage(pageWithItem);\n                return;\n            }\n        }\n        setPage(0);\n    }, [selectedKey, pages, keyExtractor]);\n\n    return (\n        <VStack as={as ?? 'div'} gap=\"1\" justify=\"space-between\" className=\"mb-1\" flexGrow=\"1\" minHeight=\"0\" {...rest}>\n            <VStack as=\"ul\" gap=\"1\" overflowY=\"auto\">\n                {renderItems?.map((item) => (\n                    <RenderComp item={item} key={keyExtractor(item)} />\n                ))}\n            </VStack>\n            {pages.length > 1 && (\n                <Pagination\n                    srHeading={paginationSrHeading}\n                    size=\"xsmall\"\n                    page={page + 1}\n                    siblingCount={0}\n                    count={pageCount}\n                    onPageChange={(page) => setPage(page - 1)}\n                    prevNextTexts={false}\n                />\n            )}\n        </VStack>\n    );\n};\n"],"names":["PaginatedList","items","pageSize","renderItem","RenderComp","keyExtractor","selectedKey","as","paginationSrHeading","rest","page","setPage","useState","pages","useMemo","chunk","pageCount","length","renderItems","useEffect","pageWithItem","findIndex","p","map","includes","VStack","jsx","item","Pagination"],"mappings":"sGAcO,MAAMA,EAAgB,CAAqC,CAC9DC,MAAAA,EACAC,SAAAA,EAAW,GACXC,WAAYC,EACZC,aAAAA,EACAC,YAAAA,EACAC,GAAAA,EACAC,oBAAAA,EACA,GAAGC,CACY,IAAM,CACrB,KAAM,CAACC,EAAMC,CAAO,EAAIC,EAAAA,SAAS,CAAC,EAC5BC,EAAQC,UAAQ,IAAMC,QAAMd,EAAOC,CAAQ,EAAG,CAACD,EAAOC,CAAQ,CAAC,EAC/Dc,EAAYF,EAAAA,QAAQ,IAAMD,EAAMI,OAAQ,CAACJ,CAAK,CAAC,EAC/CK,EAAcJ,EAAAA,QAAQ,IAAMD,EAAMH,EAAOM,EAAY,EAAIA,EAAY,EAAIN,CAAI,EAAG,CAACG,EAAOH,EAAMM,CAAS,CAAC,EAE9GG,OAAAA,EAAAA,UAAU,IAAM,CACZ,GAAIb,EAAa,CACb,MAAMc,EAAeP,EAAMQ,UAAWC,GAAMA,EAAEC,IAAIlB,CAAY,EAAEmB,SAASlB,CAAW,CAAC,EACrF,GAAIc,GAAgB,EAAG,CACnBT,EAAQS,CAAY,EACpB,MACJ,CACJ,CACAT,EAAQ,CAAC,CACb,EAAG,CAACL,EAAaO,EAAOR,CAAY,CAAC,SAGhCoB,EAAA,CAAO,GAAIlB,GAAM,MAAO,IAAI,IAAI,QAAQ,gBAAgB,UAAU,OAAO,SAAS,IAAI,UAAU,IAAI,GAAIE,EACrG,SAAA,CAAAiB,MAACD,GAAO,GAAG,KAAK,IAAI,IAAI,UAAU,OAC7BP,SAAAA,GAAaK,IAAKI,SACdvB,EAAA,CAAW,KAAAuB,CAAA,EAAiBtB,EAAasB,CAAI,CAAE,CACnD,EACL,EACCd,EAAMI,OAAS,GACZS,EAAAA,IAACE,GACG,UAAWpB,EACX,KAAK,SACL,KAAME,EAAO,EACb,aAAc,EACd,MAAOM,EACP,aAAeN,GAASC,EAAQD,EAAO,CAAC,EACxC,cAAe,EAAA,CAAM,CAAA,EAGjC,CAER"}