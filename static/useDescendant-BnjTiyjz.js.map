{"version":3,"file":"useDescendant-BnjTiyjz.js","sources":["../../node_modules/.pnpm/@navikt+ds-react@7.35.0_@types+react@19.2.1_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/@navikt/ds-react/esm/util/debounce.js","../../node_modules/.pnpm/@navikt+ds-react@7.35.0_@types+react@19.2.1_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/@navikt/ds-react/esm/util/hooks/descendants/utils.js","../../node_modules/.pnpm/@navikt+ds-react@7.35.0_@types+react@19.2.1_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/@navikt/ds-react/esm/util/hooks/descendants/descendant.js","../../node_modules/.pnpm/@navikt+ds-react@7.35.0_@types+react@19.2.1_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/@navikt/ds-react/esm/util/hooks/descendants/useDescendant.js"],"sourcesContent":["\"use client\";\nimport { Timeout } from \"./hooks/useTimeout.js\";\n// https://github.com/mui/material-ui/blob/master/packages/mui-utils/src/debounce.js\nexport default function debounce(func, wait = 166, leading = false) {\n    const timeout = new Timeout();\n    function debounced(...args) {\n        const later = () => {\n            func.apply(this, args);\n        };\n        if (!timeout.isStarted() && leading) {\n            later();\n        }\n        timeout.start(wait, later);\n    }\n    debounced.clear = timeout.clear;\n    return debounced;\n}\n//# sourceMappingURL=debounce.js.map","/**\n * Sort an array of DOM nodes according to the HTML tree order\n * @see http://www.w3.org/TR/html5/infrastructure.html#tree-order\n * Inspired by\n * - https://github.com/floating-ui/floating-ui/blob/8e449abb0bfda143c6a6eb01d3e6943c095b744f/packages/react/src/components/FloatingList.tsx#L8\n * - https://github.com/chakra-ui/chakra-ui/tree/5ec0be610b5a69afba01a9c22365155c1b519136/packages/components/descendant\n */\nexport function sortNodes(nodes) {\n    return nodes.sort((a, b) => {\n        const compare = a.compareDocumentPosition(b);\n        if (compare & Node.DOCUMENT_POSITION_FOLLOWING ||\n            compare & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n            // a < b\n            return -1;\n        }\n        if (compare & Node.DOCUMENT_POSITION_PRECEDING ||\n            compare & Node.DOCUMENT_POSITION_CONTAINS) {\n            // a > b\n            return 1;\n        }\n        if (compare & Node.DOCUMENT_POSITION_DISCONNECTED ||\n            compare & Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC) {\n            throw Error(\"Cannot sort the given nodes.\");\n        }\n        return 0;\n    });\n}\nexport const isElement = (el) => typeof el === \"object\" &&\n    \"nodeType\" in el &&\n    el.nodeType === Node.ELEMENT_NODE;\nexport function getNextIndex(current, max, loop) {\n    let next = current + 1;\n    if (loop && next >= max)\n        next = 0;\n    return next;\n}\nexport function getPrevIndex(current, max, loop) {\n    let next = current - 1;\n    if (loop && next < 0)\n        next = max;\n    return next;\n}\nexport const cast = (value) => value;\n//# sourceMappingURL=utils.js.map","/**\n * https://github.com/chakra-ui/chakra-ui/tree/5ec0be610b5a69afba01a9c22365155c1b519136/packages/components/descendant\n */\nimport { getNextIndex, getPrevIndex, isElement, sortNodes } from \"./utils.js\";\n/**\n * @internal\n *\n * Class to manage descendants and their relative indices in the DOM.\n * It uses `node.compareDocumentPosition(...)` under the hood\n */\nexport class DescendantsManager {\n    constructor() {\n        this.descendants = new Map();\n        this.register = (nodeOrOptions) => {\n            if (nodeOrOptions == null)\n                return;\n            if (isElement(nodeOrOptions)) {\n                return this.registerNode(nodeOrOptions);\n            }\n            return (node) => {\n                this.registerNode(node, nodeOrOptions);\n            };\n        };\n        this.unregister = (node) => {\n            this.descendants.delete(node);\n            const sorted = sortNodes(Array.from(this.descendants.keys()));\n            this.assignIndex(sorted);\n        };\n        this.destroy = () => {\n            this.descendants.clear();\n        };\n        this.assignIndex = (descendants) => {\n            this.descendants.forEach((descendant) => {\n                const index = descendants.indexOf(descendant.node);\n                descendant.index = index;\n                descendant.node.dataset.index = descendant.index.toString();\n            });\n        };\n        this.count = () => this.descendants.size;\n        this.enabledCount = () => this.enabledValues().length;\n        this.values = () => {\n            const values = Array.from(this.descendants.values());\n            return values.sort((a, b) => a.index - b.index);\n        };\n        this.enabledValues = () => {\n            return this.values().filter((descendant) => !descendant.disabled);\n        };\n        this.item = (index) => {\n            if (this.count() === 0)\n                return undefined;\n            return this.values()[index];\n        };\n        this.enabledItem = (index) => {\n            if (this.enabledCount() === 0)\n                return undefined;\n            return this.enabledValues()[index];\n        };\n        this.first = () => this.item(0);\n        this.firstEnabled = () => this.enabledItem(0);\n        this.last = () => this.item(this.descendants.size - 1);\n        this.lastEnabled = () => {\n            const lastIndex = this.enabledValues().length - 1;\n            return this.enabledItem(lastIndex);\n        };\n        this.indexOf = (node) => {\n            var _a, _b;\n            if (!node)\n                return -1;\n            return (_b = (_a = this.descendants.get(node)) === null || _a === void 0 ? void 0 : _a.index) !== null && _b !== void 0 ? _b : -1;\n        };\n        this.enabledIndexOf = (node) => {\n            if (node == null)\n                return -1;\n            return this.enabledValues().findIndex((i) => i.node.isSameNode(node));\n        };\n        this.next = (index, loop = true) => {\n            const next = getNextIndex(index, this.count(), loop);\n            return this.item(next);\n        };\n        this.nextEnabled = (index, loop = true) => {\n            const item = this.item(index);\n            if (!item)\n                return;\n            const enabledIndex = this.enabledIndexOf(item.node);\n            const nextEnabledIndex = getNextIndex(enabledIndex, this.enabledCount(), loop);\n            return this.enabledItem(nextEnabledIndex);\n        };\n        this.prev = (index, loop = true) => {\n            const prev = getPrevIndex(index, this.count() - 1, loop);\n            return this.item(prev);\n        };\n        this.prevEnabled = (index, loop = true) => {\n            const item = this.item(index);\n            if (!item)\n                return;\n            const enabledIndex = this.enabledIndexOf(item.node);\n            const prevEnabledIndex = getPrevIndex(enabledIndex, this.enabledCount() - 1, loop);\n            return this.enabledItem(prevEnabledIndex);\n        };\n        this.registerNode = (node, options) => {\n            if (!node)\n                return;\n            /**\n             * While the node is registered, we have to make sure to sync options\n             * This is useful when ex. a node is disabled after it has been registered\n             */\n            const mapNode = this.descendants.get(node);\n            if (mapNode) {\n                this.descendants.set(node, Object.assign({ index: mapNode.index, node }, options));\n                return;\n            }\n            const keys = Array.from(this.descendants.keys()).concat(node);\n            const sorted = sortNodes(keys);\n            if (options === null || options === void 0 ? void 0 : options.disabled) {\n                options.disabled = !!options.disabled;\n            }\n            const descendant = Object.assign({ node, index: -1 }, options);\n            this.descendants.set(node, descendant);\n            this.assignIndex(sorted);\n        };\n    }\n}\n//# sourceMappingURL=descendant.js.map","/**\n * https://github.com/chakra-ui/chakra-ui/tree/5ec0be610b5a69afba01a9c22365155c1b519136/packages/components/descendant\n */\nimport React, { useRef, useState } from \"react\";\nimport { createContext } from \"../../create-context.js\";\nimport { useClientLayoutEffect } from \"../useClientLayoutEffect.js\";\nimport { mergeRefs } from \"../useMergeRefs.js\";\nimport { DescendantsManager } from \"./descendant.js\";\nimport { cast } from \"./utils.js\";\n/**\n * Provides strongly typed versions of the context provider and hooks above.\n */\nexport function createDescendantContext() {\n    const [DescendantsContextProvider, useDescendantsContext] = createContext({\n        name: \"DescendantsProvider\",\n        errorMessage: \"useDescendantsContext must be used within DescendantsProvider\",\n    });\n    const ContextProvider = cast((props) => (React.createElement(DescendantsContextProvider, Object.assign({}, props.value), props.children)));\n    /**\n     * @internal\n     * This hook provides information to descendant component:\n     * - Index compared to other descendants\n     * - ref callback to register the descendant\n     * - Its enabled index compared to other enabled descendants\n     */\n    function useDescendant(options) {\n        const descendants = useDescendantsContext();\n        const [index, setIndex] = useState(-1);\n        const ref = useRef(null);\n        useClientLayoutEffect(() => {\n            return () => {\n                if (!ref.current)\n                    return;\n                // eslint-disable-next-line react-hooks/exhaustive-deps\n                descendants.unregister(ref.current);\n            };\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n        }, []);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        useClientLayoutEffect(() => {\n            if (!ref.current)\n                return;\n            const dataIndex = Number(ref.current.dataset.index);\n            if (index !== dataIndex && !Number.isNaN(dataIndex)) {\n                setIndex(dataIndex);\n            }\n        });\n        const refCallback = options\n            ? cast(descendants.register(options))\n            : cast(descendants.register);\n        return {\n            descendants,\n            index,\n            enabledIndex: descendants.enabledIndexOf(ref.current),\n            register: mergeRefs([refCallback, ref]),\n        };\n    }\n    /**\n     * @internal\n     * Initializing DescendantsManager\n     */\n    function useDescendants() {\n        const descendants = useRef(new DescendantsManager()).current;\n        return descendants;\n    }\n    return [\n        // context provider\n        ContextProvider,\n        // call this when you need to read from context\n        useDescendantsContext,\n        // descendants state information, to be called and passed to `ContextProvider`\n        useDescendants,\n        // descendant index information\n        useDescendant,\n    ];\n}\n//# sourceMappingURL=useDescendant.js.map"],"names":["debounce","func","wait","leading","timeout","Timeout","debounced","args","later","sortNodes","nodes","a","b","compare","isElement","el","getNextIndex","current","max","loop","next","getPrevIndex","cast","value","DescendantsManager","nodeOrOptions","node","sorted","descendants","descendant","index","lastIndex","_a","_b","i","item","enabledIndex","nextEnabledIndex","prev","prevEnabledIndex","options","mapNode","keys","createDescendantContext","DescendantsContextProvider","useDescendantsContext","createContext","ContextProvider","props","React","useDescendant","setIndex","useState","ref","useRef","useClientLayoutEffect","dataIndex","refCallback","mergeRefs","useDescendants"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}