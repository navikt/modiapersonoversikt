import{a1 as g,dj as ge,a3 as p,dv as J,dk as Y,dl as he,a6 as te,a4 as pe,b2 as K,da as ve,d8 as Ee,db as ye,ab as Se,dw as be,cH as Ae,aa as Re,bb as Te,ay as W,$ as C,dx as xe,bY as re,bZ as ne,bX as U,d as ae,b3 as Oe,cM as _e,dy as q,b_ as Me,b$ as se,c0 as Fe,t as Le,c1 as Ne,aW as ke,ap as we,Y as E,c2 as P,aA as z,as as De,ai as oe,cK as Ie,c4 as je,c5 as He,ch as Ce,c3 as Pe,c7 as Be,c8 as Ge,c9 as Ue,aK as $e,aX as ze}from"./main-b-impCUS.js";import{d as le}from"./useDescendant-BnjTiyjz.js";import{T as V,M as f}from"./modiapersonoversikt-api-BJowq4Ah.js";var Ve=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const X=(e,t,n)=>{const{outerHeightStyle:r,overflow:a}=t;return n.current<20&&(r>0&&Math.abs((e.outerHeightStyle||0)-r)>1||e.overflow!==a)?(n.current+=1,t):e};function B(e){return parseInt(e,10)||0}const Ke=g.forwardRef((e,t)=>{var n,r,{className:a,onChange:s,maxRows:o,minRows:l=1,autoScrollbar:m,style:c,value:d}=e,y=Ve(e,["className","onChange","maxRows","minRows","autoScrollbar","style","value"]);const{current:u}=g.useRef(d!=null),i=g.useRef(null),v=ge(i,t),R=g.useRef(null),h=g.useRef(0),[S,x]=g.useState({outerHeightStyle:0}),_=p.useCallback(()=>{const b=i.current,T=J(b).getComputedStyle(b);if(T.width==="0px")return{outerHeightStyle:0};const A=R.current;A.style.width=T.width,A.value=b.value||y.placeholder||"x",A.value.slice(-1)===`
`&&(A.value+=" ");const F=T.boxSizing,O=B(T.paddingBottom)+B(T.paddingTop),k=B(T.borderBottomWidth)+B(T.borderTopWidth),D=A.scrollHeight-O;A.value="x";const H=A.scrollHeight-O;let L=D;l&&(L=Math.max(Number(l)*H,L)),o&&(L=Math.min(Number(o)*H,L)),L=Math.max(L,H);const fe=L+(F==="border-box"?O+k:0),me=Math.abs(L-D)<=1;return{outerHeightStyle:fe,overflow:me}},[o,l,y.placeholder]),j=()=>{const b=_();Z(b)||x(M=>X(M,b,h))};Y(()=>{const b=()=>{const O=_();Z(O)||he.flushSync(()=>{x(k=>X(k,O,h))})},M=le(()=>{var O,k,D;if(h.current=0,!((O=i.current)===null||O===void 0)&&O.style.height||!((k=i.current)===null||k===void 0)&&k.style.width){((D=i.current)===null||D===void 0?void 0:D.style.overflow)==="hidden"&&x(H=>Object.assign(Object.assign({},H),{overflow:!1}));return}b()},166,!0),T=i.current,A=J(T);A.addEventListener("resize",M);let F;return typeof ResizeObserver<"u"&&(F=new ResizeObserver(M),F.observe(T)),()=>{M.clear(),A.removeEventListener("resize",M),F&&F.disconnect()}},[_]),Y(()=>{j()}),g.useEffect(()=>{h.current=0},[d]);const N=b=>{h.current=0,u||j(),s&&s(b)},w=Object.assign({"--__ac-textarea-height":S.outerHeightStyle?S.outerHeightStyle+"px":"auto","--__axc-textarea-height":S.outerHeightStyle?S.outerHeightStyle+"px":"auto",overflow:S.overflow&&!m&&!(!((n=i.current)===null||n===void 0)&&n.style.height)&&!(!((r=i.current)===null||r===void 0)&&r.style.width)?"hidden":void 0},c);return p.createElement(p.Fragment,null,p.createElement("textarea",Object.assign({value:d,onChange:N,ref:v,rows:l,style:w},y,{className:a})),p.createElement("textarea",{"aria-hidden":!0,className:a,readOnly:!0,ref:R,tabIndex:-1,style:Object.assign({visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},c)}))});function Z(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflow}const We=({maxLengthId:e,maxLength:t,currentLength:n,size:r,i18n:a})=>{const{cn:s}=te(),o=pe("Textarea",{charsLeft:a?.counterLeft?`{chars} ${a.counterLeft}`:void 0,charsTooMany:a?.counterTooMuch?`{chars} ${a.counterTooMuch}`:void 0}),l=t-n,[m,c]=g.useState(l);return g.useEffect(()=>{const d=le(()=>{c(l)},2e3);return d(),()=>{d.clear()}},[l]),p.createElement(p.Fragment,null,p.createElement("span",{id:e,className:s("navds-sr-only")},o("maxLength",{maxLength:t})),l<20&&p.createElement("span",{role:"status",className:s("navds-textarea__sr-counter navds-sr-only")},Q(m,o)),p.createElement(K,{className:s("navds-textarea__counter",{"navds-textarea__counter--error":l<0}),size:r},Q(l,o)))},Q=(e,t)=>e<0?t("charsTooMany",{chars:Math.abs(e)}):t("charsLeft",{chars:e});var Je=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const gt=g.forwardRef((e,t)=>{var n,r,a;const{inputProps:s,errorId:o,showErrorMsg:l,hasError:m,size:c,inputDescriptionId:d}=ve(e,"textarea"),{label:y,className:u,description:i,maxLength:v,hideLabel:R=!1,resize:h,UNSAFE_autoScrollbar:S,i18n:x,readOnly:_}=e,j=Je(e,["label","className","description","maxLength","hideLabel","resize","UNSAFE_autoScrollbar","i18n","readOnly"]),{cn:N}=te(),w=Ee(),b=v!==void 0&&v>0,[M,T]=g.useState((n=e?.defaultValue)!==null&&n!==void 0?n:""),A=ye(s["aria-describedby"],{[w??""]:b});return p.createElement("div",{className:N(u,"navds-form-field",`navds-form-field--${c}`,{"navds-form-field--disabled":!!s.disabled,"navds-form-field--readonly":_,"navds-textarea--readonly":_,"navds-textarea--error":m,"navds-textarea--autoscrollbar":S,[`navds-textarea--resize-${h===!0?"both":h}`]:h})},p.createElement(Se,{htmlFor:s.id,size:c,className:N("navds-form-field__label",{"navds-sr-only":R})},_&&p.createElement(be,null),y),!!i&&p.createElement(K,{className:N("navds-form-field__description",{"navds-sr-only":R}),id:d,size:c,as:"div"},i),p.createElement(Ke,Object.assign({},Ae(j,["error","errorId","size"]),s,{onChange:Re(e.onChange,e.value===void 0?F=>T(F.target.value):void 0),minRows:j.minRows||(c==="small"?2:3),autoScrollbar:S,ref:t,readOnly:_,className:N("navds-textarea__input","navds-body-short",`navds-body-short--${c??"medium"}`)},A?{"aria-describedby":A}:{})),b&&!_&&!s.disabled&&p.createElement(We,{maxLengthId:w,maxLength:v,currentLength:(a=(r=e.value)===null||r===void 0?void 0:r.length)!==null&&a!==void 0?a:M.length,size:c,i18n:x}),p.createElement("div",{className:N("navds-form-field__error"),id:o,"aria-relevant":"additions removals","aria-live":"polite"},l&&p.createElement(Te,{size:c,showIcon:!0},e.error)))}),ht=W();var ie=(e=>(e.Arbeid="ARBD",e.Helse="HELSE",e.Familie="FMLI",e.ForskuddDagpenger="FDAG",e.Hjelpemiddel="HJLPM",e.Bil="BIL",e.OrtopediskHjelpemiddel="ORT_HJE",e.Øvrig="OVRG",e.Pensjon="PENS",e.PleiepengerSyktBarn="PLEIEPENGERSY",e.Uføretrygd="UFRT",e.Utland="UTLAND",e.AndreSosiale="ANSOS",e.ØkonomiskSosial="OKSOS",e.InnholdSlettet="",e))(ie||{});function Ye(e){switch(e){case"UFRT":return"Uføretrygd";case"PENS":return"Pensjon";case"ARBD":return"Arbeid";case"HELSE":return"Helse";case"UTLAND":return"Utland";case"PLEIEPENGERSY":return"Pleiepenger sykt barn";case"ORT_HJE":return"Ortopediske hjelpemidler";case"BIL":return"Hjelpemidler bil";case"ANSOS":return"Andre sosiale tjenester";case"OKSOS":return"Økonomisk sosialhjelp";case"OVRG":return"Øvrige henvendelser";case"HJLPM":return"Hjelpemidler";case"FMLI":return"Familie";case"FDAG":return"Forskudd dagpenger endre tilbakebetaling";case"":return"Innhold slettet";case null:return"Ingen temagruppe";default:return`Ukjent temagruppe: ${e??""}`}}function ee(e){switch(e){case f.SPORSMAL_SKRIFTLIG:return"Spørsmål fra bruker";case f.SAMTALEREFERAT_OPPMOTE:return"Samtalereferat oppmøte";case f.SAMTALEREFERAT_TELEFON:return"Samtalereferat telefon";case f.SPORSMAL_MODIA_UTGAAENDE:return"Spørsmål fra NAV";case f.SVAR_SBL_INNGAAENDE:return"Svar fra bruker";case f.SVAR_SKRIFTLIG:return"Svar skriftlig";case f.INFOMELDING_MODIA_UTGAAENDE:return"Infomelding";case f.CHATMELDING_FRA_BRUKER:return"Chatmelding fra bruker";case f.CHATMELDING_FRA_NAV:return"Chatmelding fra NAV";default:return`Ukjent meldingstype: ${e}`}}function ce(e,t){switch(t){case V.CHAT:return"Chat";case V.MELDINGSKJEDE:return e?"Infomelding":"Samtale";case V.SAMTALEREFERAT:return"Referat";default:return`Ukjent meldingstype: ${t}`}}function G(e){return[...e.meldinger].sort(U(t=>t.opprettetDato))[0]}function $(e){return[...e.meldinger].sort(_e(t=>t.opprettetDato))[0]}function pt(e){if(!e)return!1;const t=$(e);return Ze(t.meldingstype)?!0:!t.avsluttetDato}function vt(e){if(!e||e.traadType===q.CHAT)return!1;if(e.traadType===q.SAMTALEREFERAT)return!0;const t=$(e);return!e.avsluttetDato||!t.avsluttetDato}function de(e){const t=$(e);return e.meldinger.length===1&&!!t.avsluttetDato}function qe(e){return e.temagruppe===ie.InnholdSlettet?ee(e.meldingstype):`${ee(e.meldingstype)} - ${Ye(e.temagruppe)}`}function Xe(e){return[f.SPORSMAL_SKRIFTLIG,f.SVAR_SBL_INNGAAENDE,f.CHATMELDING_FRA_BRUKER].includes(e)}function Et(e){const t=de(e);return ce(t,e.traadType)}function Ze(e){return[f.SAMTALEREFERAT_OPPMOTE,f.SAMTALEREFERAT_TELEFON].includes(e)}function Qe(e){return[f.CHATMELDING_FRA_BRUKER,f.CHATMELDING_FRA_NAV].includes(e)}function yt(e){return Qe(G(e).meldingstype)}function St(e){if(e.meldinger.length>1)return!1;const t=e.meldinger[0];return Xe(t.meldingstype)?!t.avsluttetDato:!1}function et(e){return[f.SVAR_SKRIFTLIG,f.SAMTALEREFERAT_TELEFON,f.SAMTALEREFERAT_OPPMOTE,f.SPORSMAL_MODIA_UTGAAENDE,f.INFOMELDING_MODIA_UTGAAENDE,f.CHATMELDING_FRA_NAV].includes(e)}function bt(e){return!tt(e)}function At(e){return e.journalposter.isNotEmpty()}function tt(e){return!!$(e).markertSomFeilsendtAv}function Rt(e){return!!e.markertSomFeilsendtAv}function Tt(e){return e.meldinger.some(t=>et(t.meldingstype))}function xt(e){if(!e)return"Ukjent saksbehandler";const t=e.ident?`(${e.ident})`:"";return`${e.navn} ${t}`}function rt(e){return Oe(e?.ferdigstiltDato||e.opprettetDato)}function Ot(e,t){const n=g.useMemo(()=>e.toSorted(U(u=>G(u).opprettetDato)),[e]),r=g.useMemo(()=>n.map(u=>{const i=u.meldinger.map(v=>{const R=v.fritekst,h=qe(v),S=v.skrevetAvTekst,x=rt(v);return(R+h+S+x).toLowerCase()}).join("||");return{traad:u,searchable:i}}),[n]),a=t.search,s=t.tema,o=t.traadType,l=t.dateRange,m=g.useMemo(()=>{if(!a)return r.map(i=>i.traad);const u=a.split(" ").map(i=>i.toLowerCase());return r.filter(({searchable:i})=>u.every(v=>i.includes(v))).map(({traad:i})=>i).sort(U(i=>G(i).opprettetDato))},[a,r]),c=g.useMemo(()=>!s||!s.length?m:m.filter(u=>s.includes(u.temagruppe)),[m,s]),d=g.useMemo(()=>c.filter(u=>o?.includes(ce(de(u),u.traadType))),[c,o]);return g.useMemo(()=>l?d.filter(u=>{const i=ae(G(u).opprettetDato);return i.isAfter(l.from)&&i.isBefore(l.to)}):d,[d,l])}const _t=()=>{const e=C.c(12),t=xe();let n;e[0]!==t?(n=re(t,ne("meldinger")),e[0]=t,e[1]=n):n=e[1];let r;e[2]!==n?(r=[n],e[2]=n,e[3]=r):r=e[3];const a=r;let s;e[4]!==t?.data?(s=t?.data??[],e[4]=t?.data,e[5]=s):s=e[5];let o;e[6]!==a?(o=a.filter(Boolean),e[6]=a,e[7]=o):o=e[7];let l;return e[8]!==s||e[9]!==o||e[10]!==t?(l={...t,data:s,errorMessages:o},e[8]=s,e[9]=o,e[10]=t,e[11]=l):l=e[11],l},ue=Me(se.CUSTOM),I=Fe({dateRange:ue,tema:[]}),nt=W(e=>e(I).tema,(e,t,n)=>{t(I,r=>({...r,tema:r.tema?Le.xor(r.tema,[n]):[n]}))}),at=W(e=>e(I).dateRange,(e,t,n)=>{const r=n??ue;t(I,a=>({...a,dateRange:r}))}),st=()=>{const e=C.c(3),[t,n]=oe(at);let r;return e[0]!==n||e[1]!==t?(r=E.jsx(Pe,{resettable:!1,range:t,onChange:n,defaultPeriodType:se.CUSTOM}),e[0]=n,e[1]=t,e[2]=r):r=e[2],r},ot=()=>{const[e,t]=oe(nt),{data:n}=Ie(),r=g.useCallback(a=>{t(a),je("oppgaver",He.TEMA)},[e]);return E.jsx(Ce,{size:"small",label:"Tema",options:n.map(a=>({label:`${a.tekst} [${a.kode}]`,value:a.kode})),isMultiSelect:!0,selectedOptions:e,onToggleSelected:r})},lt=()=>{const e=C.c(4),{data:t}=ct(),n=t.length===1?"oppgave":"oppgaver";let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=E.jsx(K,{visuallyHidden:!0,children:"funnet"}),e[0]=r):r=e[0];let a;return e[1]!==t.length||e[2]!==n?(a=E.jsxs(E.Fragment,{children:["Filter (",t.length," ",n,")",r]}),e[1]=t.length,e[2]=n,e[3]=a):a=e[3],a},Mt=()=>{const e=C.c(19),t=Ne(I),[n,r]=g.useState(!1),a=ke(),s=g.useRef(null);let o;e[0]!==t?(o=()=>{t(Be)},e[0]=t,e[1]=o):o=e[1];let l;e[2]!==a?(l=[a],e[2]=a,e[3]=l):l=e[3],g.useEffect(o,l);let m;e[4]!==n?(m=()=>{setTimeout(()=>{if(!s.current)return;const x=s.current.classList.contains("aksel-expansioncard--open");r(x),x!==n&&(x?Ge("oppgavefilter"):Ue("oppgavefilter"))},0)},e[4]=n,e[5]=m):m=e[5];const c=m;let d;e[6]!==n?(d=n?"100%":{},e[6]=n,e[7]=d):d=e[7];const y=n&&"max-h-full overflow-auto";let u;e[8]!==y?(u=we("rounded-sm",y),e[8]=y,e[9]=u):u=e[9];let i;e[10]===Symbol.for("react.memo_cache_sentinel")?(i=E.jsx(P.Header,{className:"py-0 pr-0 hover:rounded-sm",children:E.jsx(P.Title,{size:"small",as:"h3",className:"text-ax-medium",role:"alert",children:E.jsx(lt,{})})}),e[10]=i):i=e[10];let v;e[11]===Symbol.for("react.memo_cache_sentinel")?(v=E.jsx(z.New,{maxWidth:"17rem",children:E.jsx(ot,{})}),e[11]=v):v=e[11];let R;e[12]===Symbol.for("react.memo_cache_sentinel")?(R=E.jsx(P.Content,{className:"overflow-visible",children:E.jsxs(De,{gap:"2",children:[v,E.jsx(z.New,{children:E.jsx(st,{})})]})}),e[12]=R):R=e[12];let h;e[13]!==c||e[14]!==u?(h=E.jsxs(P,{size:"small","aria-label":"Filtrer oppgaver",ref:s,onClick:c,className:u,children:[i,R]}),e[13]=c,e[14]=u,e[15]=h):h=e[15];let S;return e[16]!==d||e[17]!==h?(S=E.jsx(z.New,{maxHeight:d,children:h}),e[16]=d,e[17]=h,e[18]=S):S=e[18],S},it=(e,t)=>{const{tema:n,dateRange:r}=t;if(!e||e.length===0)return[];let a=e;return n?.length&&(a=a.filter(s=>n.includes(s.tema))),r?.from&&r?.to&&(a=a.filter(s=>{const o=ae(s.aktivDato);return o.isSameOrAfter(r.from)&&o.isSameOrBefore(r.to)})),a??[]},ct=()=>{const e=C.c(17),t=$e(I),n=ze();let r;e[0]!==n?.data?(r=n?.data??[],e[0]=n?.data,e[1]=r):r=e[1];const a=r;let s;e[2]!==n?(s=re(n,ne("oppgaver")),e[2]=n,e[3]=s):s=e[3];let o;e[4]!==s?(o=[s],e[4]=s,e[5]=o):o=e[5];const l=o;let m,c;if(e[6]!==t||e[7]!==a||e[8]!==n){const u=a.sort(U(dt));m=n,c=it(u,t)??[],e[6]=t,e[7]=a,e[8]=n,e[9]=m,e[10]=c}else m=e[9],c=e[10];let d;e[11]!==l?(d=l.filter(Boolean),e[11]=l,e[12]=d):d=e[12];let y;return e[13]!==m||e[14]!==c||e[15]!==d?(y={...m,data:c,errorMessages:d},e[13]=m,e[14]=c,e[15]=d,e[16]=y):y=e[16],y},Ft=e=>`Oppgave${e.oppgaveId}`;function dt(e){return e.aktivDato}export{Mt as O,gt as T,ct as a,Ot as b,ie as c,ht as d,St as e,et as f,Ft as g,At as h,tt as i,Tt as j,bt as k,yt as l,qe as m,$ as n,I as o,pt as p,Ze as q,Rt as r,vt as s,Ye as t,_t as u,G as v,xt as w,Et as x,rt as y};
//# sourceMappingURL=utils-B5auTVmM.js.map
